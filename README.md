# Домашнее задание к занятию «Базы данных, их типы»

## ` Дмитрий Климов `

## Задание 1. СУБД
Кейс
Крупная строительная компания, которая также занимается проектированием и девелопментом, решила создать правильную архитектуру для работы с данными. Ниже представлены задачи, которые необходимо решить для каждой предметной области.

Какие типы СУБД, на ваш взгляд, лучше всего подойдут для решения этих задач и почему?

1.1. Бюджетирование проектов с дальнейшим формированием финансовых аналитических отчётов и прогнозирования рисков. СУБД должна гарантировать целостность и чёткую структуру данных.

1.1.* Хеширование стало занимать длительно время, какое API можно использовать для ускорения работы?

1.2. Под каждый девелоперский проект создаётся отдельный лендинг, и все данные по лидам стекаются в CRM к маркетологам и менеджерам по продажам. Какой тип СУБД лучше использовать для лендингов и для CRM? СУБД должны быть гибкими и быстрыми.

1.2.* Можно ли эту задачу закрыть одной СУБД? И если да, то какой именно СУБД и какой реализацией?

1.3. Отдел контроля качества решил создать базу по корпоративным нормам и правилам, обучающему материалу и так далее, сформированную согласно структуре компании. СУБД должна иметь простую и понятную структуру.

1.3.* Можно ли под эту задачу использовать уже существующую СУБД из задач выше и если да, то как лучше это реализовать?

1.4. Департамент логистики нуждается в решении задач по быстрому формированию маршрутов доставки материалов по объектам и распределению курьеров по маршрутам с доставкой документов. СУБД должна уметь быстро работать со связями.

1.4.* Можно ли к этой СУБД подключить отдел закупок или для них лучше сформировать свою СУБД в связке с СУБД логистов?

1.5.* Можно ли все перечисленные выше задачи решить, используя одну СУБД? Если да, то какую именно?


## Ответ:

1.1. Бюджетирование проектов и финансовая аналитика:

Тип СУБД: Реляционная СУБД (RDBMS).
Почему: Для бюджетирования, финансовой отчетности и прогнозирования рисков необходима строгая структура данных, транзакционная целостность и поддержка сложных SQL-запросов. Реляционные СУБД, такие как PostgreSQL, Oracle Database или Microsoft SQL Server, идеально подходят для этих задач. Они обеспечивают ACID-транзакции (Atomicity, Consistency, Isolation, Durability), что критически важно для финансовых данных.
Реализация: Использовать хорошо спроектированную схему базы данных с нормализацией для предотвращения избыточности и обеспечения целостности. Применять сложные SQL-запросы для анализа и построения отчетов.

1.1. Хеширование стало занимать длительное время, какое API можно использовать для ускорения работы?* 
Для ускорения хеширования можно использовать аппаратное ускорение, если это возможно (например, аппаратные криптографические ускорители, доступные на некоторых серверах). Если нет, можно использовать специализированные библиотеки, написанные на C/C++, например, OpenSSL, и вызывать их из вашей основной СУБД через API (например, через пользовательские функции (UDF) в PostgreSQL). Важно профилировать текущий код, чтобы точно определить, что именно занимает больше всего времени, и оптимизировать именно это. Также стоит рассмотреть возможность использования более быстрых алгоритмов хеширования, если это допустимо с точки зрения безопасности.

1.2. Лендинги и CRM:

Тип СУБД для лендингов: NoSQL СУБД (например, MongoDB, Apache Cassandra).
Почему для лендингов: Для лендингов важна гибкость схемы, так как данные могут часто меняться. NoSQL СУБД позволяют быстро адаптироваться к новым типам данных без необходимости изменения схемы базы данных. Они также хорошо масштабируются для обработки большого количества посетителей.
Тип СУБД для CRM: Реляционная СУБД (RDBMS) или NoSQL СУБД (в зависимости от сложности CRM).
Почему для CRM: Если CRM требует сложной отчетности, связей между данными и транзакционной целостности, то лучше использовать реляционную СУБД. Если же CRM простая и требует только хранить данные лидов, то можно использовать NoSQL.

1.2. Можно ли эту задачу закрыть одной СУБД? И если да, то какой именно СУБД и какой реализацией?*
Да, можно. MongoDB с использованием JSON документов подходит. Для лендингов можно хранить данные в JSON формате, а для CRM можно создать коллекции с определенной структурой, что даст гибкость и скорость.

1.3. База знаний по корпоративным нормам и правилам:

Тип СУБД: Графовая СУБД (например, Neo4j) или Document Store (например, MongoDB)
Почему: Если необходимо отображать связи между нормами, правилами, сотрудниками и отделами, то графовая СУБД идеально подходит. Если же просто необходимо хранить структурированные документы, то можно использовать Document Store.

1.3. Можно ли под эту задачу использовать уже существующую СУБД из задач выше и если да, то как лучше это реализовать?* 
Да, можно использовать MongoDB, если выбрали ее для лендингов и CRM. В этом случае корпоративные нормы и правила можно хранить в отдельных коллекциях в виде структурированных JSON-документов.

1.4. Логистика (формирование маршрутов и распределение курьеров):

Тип СУБД: Графовая СУБД (например, Neo4j) или Пространственная СУБД (PostGIS - расширение для PostgreSQL).
Почему: Для формирования оптимальных маршрутов и распределения курьеров важна возможность быстро работать с географическими данными и связями между объектами (адреса, курьеры, маршруты). Графовая СУБД позволяет эффективно находить кратчайшие пути, а пространственная СУБД позволяет выполнять сложные географические запросы.

1.4. Можно ли к этой СУБД подключить отдел закупок или для них лучше сформировать свою СУБД в связке с СУБД логистов?* 
Можно подключить отдел закупок к СУБД логистов, особенно если используется графовая или пространственная СУБД. Данные о закупках (поставщики, материалы, цены, сроки) можно связать с данными о логистике (объекты, маршруты, курьеры) для оптимизации поставок. Важно правильно спроектировать схему данных и настроить API для обмена информацией.

1.5. Можно ли все перечисленные выше задачи решить, используя одну СУБД? Если да, то какую именно?*

Теоретически, да, можно. PostgreSQL с расширениями, такими как PostGIS, предоставляет возможности для решения большинства задач:

Реляционная база данных: Для бюджетирования, финансовой аналитики, и части CRM.
Пространственные данные (PostGIS): Для логистики и маршрутизации.
JSONB поддержка: Для гибкого хранения данных лендингов (аналогично NoSQL).
Графовые расширения (например, pg_featureserv): Для задач отдела контроля качества и более сложных связей в логистике, хотя это может быть менее эффективно, чем специализированная графовая СУБД.
Преимущества использования одной СУБД:

Упрощение администрирования и обслуживания.
Снижение затрат на лицензирование и инфраструктуру.
Облегчение интеграции данных между разными отделами.
Недостатки использования одной СУБД:

Возможные компромиссы в производительности для некоторых задач (например, графовые запросы в PostgreSQL могут быть медленнее, чем в Neo4j).
Сложность настройки и оптимизации СУБД для разных типов задач.
Вывод:

Выбор одной СУБД (PostgreSQL) - это компромисс между простотой и оптимальной производительностью для каждой задачи. Если производительность критична для определенных задач, то лучше использовать специализированные СУБД (например, Neo4j для логистики). Но для большинства задач PostgreSQL с расширениями будет достаточно хорошим решением.
